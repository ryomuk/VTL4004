;;;---------------------------------------------------------------------------
;;; function for label to address for FIM&FIN
;;;---------------------------------------------------------------------------

lo     	function x, ((x)&255)
up     	function x, ((x>>8)&255)

;;;---------------------------------------------------------------------------
;;; functuon for setting counter for ISZ loop
;;;---------------------------------------------------------------------------

loop 	function x, (16-(x))
loops   function x,y, ((16-(x))<<4 + (16-(y)))

;;;---------------------------------------------------------------------------
;;; Alias for Registers and Register Pairs
;;;---------------------------------------------------------------------------

;;; Registers
R10	reg RA
R11     reg RB
R12     reg RC
R13 	reg RD
R14     reg RE
R15     reg RF

;;; Register Pairs
P0      reg R0R1
P1      reg R2R3
P2      reg R4R5
P3      reg R6R7
P4      reg R8R9
P5      reg RARB
P6      reg RCRD
P7      reg RERF
R10R11  reg RARB
R12R13  reg RCRD
R14R15  reg RERF

;;;---------------------------------------------------------------------------
;;; macro instructions
;;;---------------------------------------------------------------------------
;;;----------------------------------------------------------------------------
;;; For debug
;;;----------------------------------------------------------------------------
;;;----------------------------------------------------------------------------
;;; DEBUG_SAFEPUTCHAR
;;; PUTCHAR that does not destroy P1
;;;----------------------------------------------------------------------------
DEBUG_SAFEPUTCHAR	macro ch
	JMS PUSH_P1
	FIM P1, ch
	JMS PUTCHAR_P1
	JMS POP_P1
	endm
;;;----------------------------------------------------------------------------
;;; Register Pair Operations
;;;----------------------------------------------------------------------------
LD_P0_P1	macro	; P0 = P1
		LD R2
		XCH R0
		LD R3
		XCH R1
		endm
;;;----------------------------------------------------------------------------
LD_P0_P2	macro	; P0 = P2
		LD R4
		XCH R0
		LD R5
		XCH R1
		endm
;;;----------------------------------------------------------------------------
LD_P0_P3	macro	; P0 = P3
		LD R6
		XCH R0
		LD R7
		XCH R1
		endm
;;;----------------------------------------------------------------------------
LD_P0_P5	macro	; P0 = P5
		LD R10
		XCH R0
		LD R11
		XCH R1
		endm
;;;----------------------------------------------------------------------------
LD_P0_P6	macro	; P0 = P6
		LD R12
		XCH R0
		LD R13
		XCH R1
		endm
;;;----------------------------------------------------------------------------
LD_P1_P0	macro	; P1 = P0
		LD R0
		XCH R2
		LD R1
		XCH R3
		endm
;;;----------------------------------------------------------------------------
LD_P1_P2	macro	; P1 = P2
		LD R4
		XCH R2
		LD R5
		XCH R3
		endm
;;;----------------------------------------------------------------------------
LD_P1_P3	macro	; P1 = P3
		LD R6
		XCH R2
		LD R7
		XCH R3
		endm
;;;----------------------------------------------------------------------------
LD_P1_P4	macro	; P1 = P4
		LD R8
		XCH R2
		LD R9
		XCH R3
		endm
;;;----------------------------------------------------------------------------
LD_P2_P0	macro	; P2 = P0
		LD R0
		XCH R4
		LD R1
		XCH R5
		endm
;;;----------------------------------------------------------------------------
LD_P2_P1	macro	; P2 = P1
		LD R2
		XCH R4
		LD R3
		XCH R5
		endm
;;;----------------------------------------------------------------------------
LD_P2_P3	macro	; P2 = P3
		LD R6
		XCH R4
		LD R7
		XCH R5
		endm
;;;----------------------------------------------------------------------------
LD_P2_P4	macro	; P2 = P4
		LD R8
		XCH R4
		LD R9
		XCH R5
		endm
;;;----------------------------------------------------------------------------
LD_P3_P1	macro	; P3 = P1
		LD R2
		XCH R6
		LD R3
		XCH R7
		endm
;;;----------------------------------------------------------------------------
LD_P3_P2	macro	; P3 = P2
		LD R4
		XCH R6
		LD R5
		XCH R7
		endm
;;;----------------------------------------------------------------------------
LD_P3_P5	macro	; P3 = P5
		LD R10
		XCH R6
		LD R11
		XCH R7
		endm
;;;----------------------------------------------------------------------------
LD_P4_P1	macro	; P4 = P1
		LD R2
		XCH R8
		LD R3
		XCH R9
		endm
;;;----------------------------------------------------------------------------
LD_P5_P0	macro	; P5 = P0
		LD R0
		XCH R10
		LD R1
		XCH R11
		endm
;;;----------------------------------------------------------------------------
LD_P6_P0	macro	; P6 = P0
		LD R0
		XCH R12
		LD R1
		XCH R13
		endm
;;;----------------------------------------------------------------------------
LD_P7_P2	macro	; P7 = P2
		LD R4
		XCH R14
		LD R5
		XCH R15
		endm
;;;----------------------------------------------------------------------------
